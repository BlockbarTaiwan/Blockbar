<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>For Customers</title>

    <link rel="stylesheet" type="text/css" href="main.css">

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>

</head>
<body style="background-color:#000000">
    <div class="container">

        <img src="bar_finished.png" alt="BlockbarLogo" width="551" height="322">

        <h1><p style="color:#ffffff; font-size:50px" font size="7">For Customers</p></h1>

        

		<p style="color:#ffffff;">	
			
			<h2 id="resultCountry"></h2>
			
			<h3 id="resultDescription"></h3>
	
			<h4 id="resultProvince"></h4>
	
			<h5 id="resultTitle"></h5>
	
			<h6 id="resultWinery"></h6>

			<p class="h7" id="resultenterUsername"></p>
	
		</p>


    </div>

    <script src="https://cdn.jsdelivr.net/gh/ethereum/web3.js@1.0.0-beta.36/dist/web3.min.js" integrity="sha256-nWBTbvxhJgjslRyuAKJHK+XcZPlCnmIAAMixz6EefVk=" crossorigin="anonymous"></script>
    <script>
       // Script Area
       window.dexon.enable()
       
       // a Pop up for user 
       const dexonProvider = window.dexon
       const web3 = new Web3(dexonProvider)
       
       // init web3 with dexon provider
       web3.eth.getAccounts().then(accounts => {
           console.log('0x8b4f182A36752c95acB605C85E2BE3FbFB8b0919') // get accounts
           })
       
       var BlockbarDataContract = new web3.eth.Contract([
	    {
		    "constant": false,
		    "inputs": [
		    	{
		    		"name": "_country",
		    		"type": "string"
		    	}
		    ],
		    "name": "setCountry",
		    "outputs": [],
		    "payable": false,
		    "stateMutability": "nonpayable",
		    "type": "function"
	    },
	    {
		    "constant": false,
		    "inputs": [
		    	{
		    		"name": "_description",
		    		"type": "string"
		    	}
		    ],
		    "name": "setDescription",
		    "outputs": [],
		    "payable": false,
		    "stateMutability": "nonpayable",
		    "type": "function"
	    },
	    {
		    "constant": false,
		    "inputs": [
		    	{
		    		"name": "_enterPassword",
		    		"type": "string"
		    	}
		    ],
		    "name": "setenterPassword",
		    "outputs": [],
		    "payable": false,
		    "stateMutability": "nonpayable",
		    "type": "function"
	    },  
	    {
		    "constant": false,
		    "inputs": [
		    	{
		    		"name": "_enterUsername",
		    		"type": "string"
		    	}
		    ],
		    "name": "setenterUsername",
		    "outputs": [],
		    "payable": false,
		    "stateMutability": "nonpayable",
		    "type": "function"
	    },
	    {
		    "constant": false,
		    "inputs": [
			    {
			    	"name": "_province",
			    	"type": "string"
			    }
		    ],
		    "name": "setProvince",
		    "outputs": [],
		    "payable": false,
		    "stateMutability": "nonpayable",
		    "type": "function"
	    },
	    {
		    "constant": false,
		    "inputs": [
		    	{
		    		"name": "_title",
		    		"type": "string"
		    	}
		    ],
		    "name": "setTitle",
		    "outputs": [],
		    "payable": false,
		    "stateMutability": "nonpayable",
		    "type": "function"
	    },
	    {
		    "constant": false,
		    "inputs": [
		    	{
		    		"name": "_winery",
		    		"type": "string"
		    	}
		    ],
		    "name": "setWinery",
		    "outputs": [],
		    "payable": false,
		    "stateMutability": "nonpayable",
		    "type": "function"
	    },
	    {
		    "constant": true,
		    "inputs": [],
		    "name": "getCountry",
		    "outputs": [
		    	{
		    		"name": "",
		    		"type": "string"
		    	}
		    ],
		    "payable": false,
		    "stateMutability": "view",
		    "type": "function"
	    },
	    {
		    "constant": true,
		    "inputs": [],
		    "name": "getDescription",
		    "outputs": [
		    	{
				    "name": "",
				    "type": "string"
			    }
		    ],
		    "payable": false,
		    "stateMutability": "view",
		    "type": "function"
	    },
	    {
		    "constant": true,
		    "inputs": [],
		    "name": "getenterPassword",
		    "outputs": [
		    	{
		    		"name": "",
		    		"type": "string"
		    	}
		    ],
		    "payable": false,
		    "stateMutability": "view",
		    "type": "function"
	    },
	    {
		    "constant": true,
		    "inputs": [],
		    "name": "getenterUsername",
		    "outputs": [
		    	{
		    		"name": "",
		    		"type": "string"
		    	}
		    ],
		    "payable": false,
		    "stateMutability": "view",
		    "type": "function"
	    },
	    {
		    "constant": true,
		    "inputs": [],
		    "name": "getProvince",
		    "outputs": [
		    	{
		    		"name": "",
		    		"type": "string"
		    	}
		    ],
		    "payable": false,
		    "stateMutability": "view",
		    "type": "function"
	    },
	    {
		    "constant": true,
		    "inputs": [],
		    "name": "getTitle",
		    "outputs": [
		    	{
		    		"name": "",
		    		"type": "string"
		    	}
		    ],
		    "payable": false,
		    "stateMutability": "view",
		    "type": "function"
	    },
	    {
		    "constant": true,
		    "inputs": [],
		    "name": "getWinery",
		    "outputs": [
		    	{
		    		"name": "",
		    		"type": "string"
		    	}
		    ],
		    "payable": false,
		    "stateMutability": "view",
		    "type": "function"
	    }
    ],'0x1ef2c58c6f1e0e2a52ccb2f785ced6b211636d86')      
       //const blockbarContract = new web3.eth.Contract(
       //    blockbarContract.abi,
       //    blockbarContract.address,
       //    )
           
           //blockbarContract.methods.value().call().then(num => {
               //console.log('num', '0x0aeda0ba33b67261bc823243b8ed59d01f182c5a')
            //})
        
        //var blockbarContractAdd = BlockbarDataContract.at('0x73b0068a7857d0764c39da327de281cbf279bdb0');
        //console.log(blockbarContractAdd);

        // contracts methods will be expose here
        BlockbarDataContract.methods.getCountry().call().then(Country=>{
			//console.log('AA',Country);
			//if(!error){
            $("#resultCountry").text('Country: \"' + Country + '\"');
			$("#resultCountry").css({'color':'#B4BADE','font-size':'150%','line-height':'150%'});
            //}else
            //    console.log(error);
		});
		
		//BlockbarDataContract.methods.getCountry(function(error,result).call().then(C);

		BlockbarDataContract.methods.getDescription().call().then(Description=>{
            //if(!error){
            $("#resultDescription").text('Description: \"' + Description + '\"');
			$("#resultDescription").css({'color':'#B4BADE','font-size':'150%','line-height':'150%'});
            //}else
            //    console.log(error);
        });

		BlockbarDataContract.methods.getProvince().call().then(Province=>{
            //if(!error){
            $("#resultProvince").text('Province: \"' + Province + '\"');
			$("#resultProvince").css({'color':'#B4BADE','font-size':'150%','line-height':'150%'});
            //}else
            //    console.log(error);
        });

		BlockbarDataContract.methods.getTitle().call().then(Title=> {
            //if(!error){
            $("#resultTitle").text('Title: \"' + Title + '\"');
			$("#resultTitle").css({'color':'#B4BADE','font-size':'150%','line-height':'20%'});
            //}else
            //    console.log(error);
        });

		BlockbarDataContract.methods.getWinery().call().then(Winery=> {
            //if(!error){
            $("#resultWinery").text('Winery: \"' + Winery + '\"');
			$("#resultWinery").css({'color':'#B4BADE','font-size':'150%','line-height':'20%'});
            //}else
            //    console.log(error);
        });

		BlockbarDataContract.methods.getenterUsername().call().then(enterUsername=> {
            //if(!error){
            $("#resultenterUsername").text('Staff Name: \"' + enterUsername + '\"');
			$("#resultenterUsername").css({'color':'#FFFFFF','font-size':'150%','line-height':'200%'});
            //}else
            //    console.log(error);
        });
        
        $("#button").click(function() {
            BlockbarDataContract.methods.setCountry($("#country").val()).send({from:'0x8b4f182A36752c95acB605C85E2BE3FbFB8b0919'}).then(setCountry=>{
			});

			BlockbarDataContract.methods.setDescription($("#description").val()).send({from:'0x8b4f182A36752c95acB605C85E2BE3FbFB8b0919'}).then(setDescription=>{
			});

			BlockbarDataContract.methods.setProvince($("#province").val()).send({from:'0x8b4f182A36752c95acB605C85E2BE3FbFB8b0919'}).then(setProvince=>{
			});

			BlockbarDataContract.methods.setTitle($("#title").val()).send({from:'0x8b4f182A36752c95acB605C85E2BE3FbFB8b0919'}).then(setTitle=>{
			});

			BlockbarDataContract.methods.setWinery($("#winery").val()).send({from:'0x8b4f182A36752c95acB605C85E2BE3FbFB8b0919'}).then(setWinery=>{
			});
        });

    </script>

</body>
</html>